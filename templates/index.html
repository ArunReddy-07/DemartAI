{% extends "base.html" %}

{% block title %}Dashboard - D-Mart Smart Inventory System{% endblock %}

{% block content %}
        <div class="container">
            <!-- Hero -->
            <div class="hero" style="margin-bottom:1.5rem;">
                <div class="hero-content">
                    <h1>Welcome back ‚Äî Manage inventory with confidence</h1>
                    <p class="hero-sub">Real-time insights, optimized stock movements, and easy controls to keep shelves stocked and sales moving.</p>
                </div>
                <div class="hero-cta">
                    <a href="/analytics" class="btn-primary">View Analytics</a>
                    <a href="/settings" class="settings-btn" style="margin-left:8px;">Stock Movements</a>
                </div>
            </div>
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üì¶</div>
                    <div class="stat-info">
                        <h3 id="totalProducts">200</h3>
                        <p>Total Products</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö†Ô∏è</div>
                    <div class="stat-info">
                        <h3 id="lowStock">0</h3>
                        <p>Low Stock Alerts</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-info">
                        <h3 id="highDemand">0</h3>
                        <p>High Demand Items</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-info">
                        <h3 id="avgPrice">‚Çπ0</h3>
                        <p>Avg Product Price</p>
                    </div>
                </div>
            </div>

            <!-- Main Grid -->
            <div class="main-grid">
                <!-- Left Panel - Form -->
                <div class="card">
                    <h2 class="card-title">Add Product Analysis</h2>
                    <form id="productForm" class="product-form">
                        <div class="form-group">
                            <label for="productName">Select Product</label>
                            <select id="productName" required>
                                <option value="">Choose a product...</option>
                                {% for product in products %}
                                <option value="{{ product.name }}">{{ product.name }} - {{ product.category }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="season">Season</label>
                            <select id="season" required>
                                <option value="">Select season...</option>
                                <option value="Summer">‚òÄÔ∏è Summer</option>
                                <option value="Winter">‚ùÑÔ∏è Winter</option>
                                <option value="Monsoon">üåßÔ∏è Monsoon</option>
                                <option value="Festival">üéâ Festival</option>
                                <option value="Regular">üìÖ Regular</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="stock">Current Stock</label>
                            <input type="number" id="stock" placeholder="Enter current stock" required min="0">
                        </div>

                        <button type="submit" class="btn-primary">
                            <span>üîÆ Analyze & Predict</span>
                        </button>
                    </form>

                    <!-- Quick Stats -->
                    <div class="quick-stats">
                        <h3>Quick Insights</h3>
                        <div id="quickInsights" class="insights-list">
                            <p class="insight-item">Select a product to see insights</p>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - Results -->
                <div class="card">
                    <h2 class="card-title">Inventory Analysis Results</h2>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Season</th>
                                    <th>Stock</th>
                                    <th>Demand</th>
                                    <th>Decision</th>
                                    <th>Price</th>
                                    <th>Maintain</th>
                                </tr>
                            </thead>
                            <tbody id="tableData">
                                <tr>
                                    <td colspan="7" class="empty-state">
                                        <div class="empty-icon">üìä</div>
                                        <p>No analysis yet. Start by adding a product above.</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- AI Chatbot -->
    <div class="chatbot-container" id="chatbot">
        <div class="chatbot-header" id="chatbotHeader">
            <h3>ü§ñ AI Assistant</h3>
            <button class="chatbot-toggle" id="chatbotToggle">‚àí</button>
        </div>
        <div class="chatbot-body" id="chatbotBody">
            <div class="chat-messages" id="chatMessages">
                <div class="bot-message">
                    <p>üëã Hi! I'm your D-Mart AI assistant. Ask me about inventory management, seasonal trends, or product recommendations!</p>
                </div>
            </div>
            <form class="chat-input-form" id="chatForm">
                <input type="text" id="chatInput" placeholder="Ask me anything..." required>
                <button type="submit">Send</button>
            </form>
        </div>
    </div>

{% endblock %}

{% block extra_js %}
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chatbot.js') }}"></script>
{% endblock %}
